<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Night üåî</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            width: 100%;
            height: 100%;
            background: #04020a;
        }

        canvas {
            display: block;
        }
    </style>
    <link rel="icon" href="logo.svg" type="image/svg+xml" />
</head>
<body>

<canvas id="canvas"></canvas>

<audio id="bgm" loop>
    <source src="#" type="audio/mpeg">
</audio>

<script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const bgm = document.getElementById('bgm');
    bgm.volume = 0.3;

    let W, H;
    function resize() {
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
    }
    resize();
    window.addEventListener('resize', resize);

    function rand(min, max){ return Math.random()*(max-min)+min; }

    // --------------------
    // Í∏∞Î≥∏ Ïò§Î∏åÏ†ùÌä∏
    // --------------------
    const stars = [], shootingStars = [], trees = [], hill = [];
    let scrollY = 0;

    for(let i=0;i<260;i++){
        stars.push({ x:rand(0,W), y:rand(0,H*0.75), r:rand(0.5,1.8), tw:rand(0.3,1), twSpeed:rand(0.002,0.008) });
    }

    for(let i=0;i<12;i++){
        shootingStars.push({ x:rand(W*0.2,W*0.9), y:rand(0,H*0.3), speed:rand(7,14), delay:rand(0,400), trail:[] });
    }

    const hillHeight = H*0.28;
    const hillCount = 6;
    for(let i=0;i<=hillCount;i++){
        hill.push({ x:(i/hillCount)*W, y:H-hillHeight-rand(10,80) });
    }

    function getHillY(x){
        for(let i=1;i<hill.length;i++){
            const p0 = hill[i-1], p1 = hill[i];
            if(x>=p0.x && x<=p1.x){
                const t = (x-p0.x)/(p1.x-p0.x);
                return p0.y + (p1.y - p0.y) * t;
            }
        }
        return H - hillHeight;
    }

    for(let i=0;i<7;i++){
        const x = rand(0,W);
        trees.push({ x, y:getHillY(x)-rand(5,30), h:rand(35,80), w:rand(10,18) });
    }

    // --------------------
    // Îã¨
    // --------------------
    let moonPhase = 0;
    function drawMoon(){
        const x = W*0.78, y=H*0.25, r=Math.min(W,H)*0.07;
        const glow = ctx.createRadialGradient(x,y,r*0.2,x,y,r*2);
        glow.addColorStop(0,'rgba(255,255,255,0.5)');
        glow.addColorStop(1,'rgba(255,255,255,0)');
        ctx.fillStyle = glow;
        ctx.beginPath();
        ctx.arc(x,y,r*2,0,Math.PI*2);
        ctx.fill();

        ctx.fillStyle='#fff9f5';
        ctx.beginPath();
        ctx.arc(x,y,r,0,Math.PI*2);
        ctx.fill();

        const phase = Math.sin(moonPhase*Math.PI);
        const offset = r*(0.6-phase*1.2);
        ctx.fillStyle='rgba(10,10,30,0.35)';
        ctx.beginPath();
        ctx.arc(x+offset,y,r,0,Math.PI*2);
        ctx.fill();
    }

    // --------------------
    // ÏùÄÌïòÏàò
    // --------------------
    function drawMilkyWay(strength){
        const grad = ctx.createLinearGradient(0,H*0.1,0,H*0.7);
        grad.addColorStop(0,'rgba(255,210,255,0)');
        grad.addColorStop(0.5,`rgba(255,210,255,${0.25*strength})`);
        grad.addColorStop(1,'rgba(255,210,255,0)');

        ctx.save();
        ctx.globalCompositeOperation='screen';
        ctx.translate(W*0.15,H*0.2);
        ctx.rotate(-0.25);
        ctx.fillStyle = grad;
        ctx.fillRect(0,0,W*0.8,H*0.6);
        ctx.restore();
    }

    // --------------------
    // Ïï†ÎãàÎ©îÏù¥ÏÖò
    // --------------------
    let t = 0;
    function animate(){
        t+=0.01;
        ctx.clearRect(0,0,W,H);

        // ÌïòÎäò
        const sky = ctx.createLinearGradient(0,0,0,H);
        sky.addColorStop(0,'rgb(255,178,240)');
        sky.addColorStop(0.35,'rgb(154,75,255)');
        sky.addColorStop(0.7,'rgb(43,10,74)');
        sky.addColorStop(1,'rgb(5,1,10)');
        ctx.fillStyle = sky;
        ctx.fillRect(0,0,W,H);

        drawMilkyWay(0.9);

        // Î≥Ñ
        ctx.save();
        ctx.globalCompositeOperation='screen';
        stars.forEach(s=>{
            s.tw+=s.twSpeed;
            ctx.fillStyle=`rgba(255,255,255,${0.35+Math.sin(s.tw)*0.6})`;
            ctx.beginPath();
            ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
            ctx.fill();
        });
        ctx.restore();

        // Îã¨
        moonPhase+=0.00006;
        drawMoon();

        // Î≥ÑÎò•Î≥Ñ
        shootingStars.forEach(sh=>{
            if(sh.delay>0){ sh.delay--; return; }
            sh.x-=sh.speed;
            sh.y+=sh.speed*0.6;
            sh.trail.push({x:sh.x,y:sh.y});
            if(sh.trail.length>20) sh.trail.shift();
            ctx.strokeStyle='rgba(255,255,255,0.8)';
            ctx.beginPath();
            sh.trail.forEach(p=>ctx.lineTo(p.x,p.y));
            ctx.stroke();
            if(sh.x<-200 || sh.y>H+200){
                sh.x=rand(W*0.2,W*0.9);
                sh.y=rand(0,H*0.3);
                sh.delay=rand(120,500);
                sh.trail=[];
            }
        });

        // Ïñ∏Îçï
        ctx.fillStyle='rgb(10,6,25)';
        ctx.beginPath();
        ctx.moveTo(0,H);
        hill.forEach(p=>ctx.lineTo(p.x,p.y));
        ctx.lineTo(W,H);
        ctx.fill();

        // ÎÇòÎ¨¥
        ctx.fillStyle='rgb(6,3,20)';
        trees.forEach(tr=>{
            ctx.beginPath();
            ctx.moveTo(tr.x,tr.y);
            ctx.lineTo(tr.x-tr.w/2,tr.y+tr.h);
            ctx.lineTo(tr.x+tr.w/2,tr.y+tr.h);
            ctx.fill();
        });

        requestAnimationFrame(animate);
    }

    animate();

    window.addEventListener('click',()=>{ if(bgm.paused) bgm.play(); });
</script>
</body>
</html>
